<!DOCTYPE html>
<html lang="{{ language|default('en') }}" dir="{{ dir|default('ltr') }}" data-theme="{{ theme|default('system') }}">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>{{ title }}</title>

	<!-- SEO & Social -->
	<meta name="description" content="{{ meta_description|default('') }}" />
	<meta name="keywords" content="{{ meta_keywords|default('') }}" />
	<link rel="canonical" href="{{ canonical_url|default(request.url if request else '') }}" />
	<meta name="robots" content="{{ robots|default('index,follow') }}" />
	<meta name="author" content="{{ author|default('') }}" />
	<meta name="theme-color" content="{{ theme_color|default('#0ea5e9') }}" />

	<!-- Open Graph -->
	<meta property="og:title" content="{{ og_title|default(title) }}" />
	<meta property="og:description" content="{{ og_description|default(meta_description) }}" />
	<meta property="og:url" content="{{ og_url|default(canonical_url) }}" />
	<meta property="og:type" content="{{ og_type|default('website') }}" />
	<meta property="og:image" content="{{ og_image|default('') }}" />
	<meta property="og:image:alt" content="{{ og_image_alt|default('') }}" />

	<!-- Twitter Cards -->
	<meta name="twitter:card" content="{{ twitter_card|default('summary_large_image') }}" />
	<meta name="twitter:site" content="{{ twitter_site|default('') }}" />
	<meta name="twitter:title" content="{{ twitter_title|default(title) }}" />
	<meta name="twitter:description" content="{{ twitter_description|default(meta_description) }}" />
	<meta name="twitter:image" content="{{ twitter_image|default(og_image) }}" />

	<!-- Icons & Manifest -->
	<link rel="icon" href="{{ favicon_ico|default('/favicon.ico') }}" sizes="any" />
	<link rel="icon" type="image/svg+xml" href="{{ favicon_svg|default('/favicon.svg') }}" />
	<link rel="apple-touch-icon" href="{{ apple_touch_icon|default('/apple-touch-icon.png') }}" />
	<link rel="manifest" href="{{ manifest_href|default('/site.webmanifest') }}" />

	<!-- Alternate languages & feeds (optional) -->
	<!-- Example: <link rel="alternate" hreflang="en" href="https://example.com/en/" /> -->
	{{ alternates_html|default('')|safe }}
	<link rel="alternate" type="application/rss+xml" title="RSS" href="{{ rss_href|default('') }}" />

	<!-- Networking hints -->
	<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<!-- Example: <link rel="dns-prefetch" href="//cdn.example.com" /> -->
	{{ preconnect_html|default('')|safe }}

	<!-- Preload critical assets (images, fonts, css) -->
	<!-- Example font preload:
	<link rel="preload" as="font" href="/fonts/Inter-Variable.woff2" type="font/woff2" crossorigin>
	-->
	{{ preload_html|default('')|safe }}

	<!-- Styles -->
	<link rel="stylesheet" href="{{ main_css_href|default('/static/css/styles.css') }}" />
	{{ stylesheets_html|default('')|safe }}

	<!-- Head scripts -->
	<script>
		(function(){
			try {
				var setting = localStorage.getItem('theme');
				var theme = setting && setting !== 'system' ? setting : (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
				document.documentElement.dataset.theme = theme;
			} catch(e) {}
		})();
	</script>
	{{ scripts_head_html|default('')|safe }}

	<!-- Structured data (JSON-LD) -->
	<script type="application/ld+json">{{ structured_data_jsonld|default('{}')|safe }}</script>

	<!-- Security hints (CSP via meta is limited; prefer headers) -->
	<meta http-equiv="Content-Security-Policy" content="{{ csp_meta|default("default-src 'self'; img-src 'self' data: https:; object-src 'none'; base-uri 'self'; frame-ancestors 'none';") }}" />
</head>

<body class="{{ body_class|default('min-h-screen antialiased') }}">
	<a class="skip-link" href="#main" style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden;">Skip to content</a>

	<!-- Page shell landmarks -->
	<header id="site-header" role="banner">
		{{ header_html|default('')|safe }}
	</header>

	<nav id="site-nav" aria-label="Primary">
		{{ nav_html|default('')|safe }}
	</nav>

	<main id="main" tabindex="-1">
		<!-- Above-the-fold / skeleton -->
		{{ above_fold_html|default('')|safe }}

		<!-- Primary page content -->
		{{ body_html|default('')|safe }}
	</main>

	<aside id="site-aside">
		{{ aside_html|default('')|safe }}
	</aside>

	<footer id="site-footer">
		{{ footer_html|default('')|safe }}
	</footer>

	<!-- App scripts -->
	<script type="module" src="{{ main_module_js|default('/static/js/app.js') }}" defer></script>
	<script nomodule src="{{ legacy_js|default('/static/js/app.legacy.js') }}" defer></script>
	{{ scripts_html|default('')|safe }}

	<!-- Analytics -->
	{{ analytics_html|default('')|safe }}

	<!-- Inline boot data -->
	<script id="boot-data" type="application/json">{{ boot_json|default('{}')|safe }}</script>
</body>
</html>
